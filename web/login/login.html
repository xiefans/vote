<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <title>小油龙</title>

    <link rel="stylesheet" type="text/css" href="login.css">
    <script src="../others/jQuery.min.js"></script>
</head>
<body>
    <!-- 背景图片 -->
    <div class="background"></div>
    <!-- 背景遮罩 -->
    <div class="background-cover"></div>

    <!-- 登录主体 -->
    <div class="container">
        <div class="card">
            <div class="card-title">小油龙投票系统</div>
            <div class="input-item">
                <input id="email" class="input-phone" type="text" placeholder="请输入邮箱">
            </div>
            <div class="input-item">
                <input id="code" class="input-code" type="text" placeholder="请输入验证码"/>
                <button id="getCode" class="get-code">获取验证码</button>
            </div>
            <div id="login" class="login-button">登录</div>
            <div class="copyright">© 谢帆</div>
        </div>
    </div>

    <script>
        $("#getCode").on("click", function (e) {
            var email = $("#email").val();
            $.ajax({
                type : "get",
                url : "http://localhost:9001/verify/email/getCode",
                data : {
                    "email" : email
                },
                crossDomain : true,
                dataType : "json",
                success : function (e) {
                    if (e.code == 200) {
                        alert("邮件发送成功");
                    } else {
                        alert(e.message);
                    }
                }
            });
        });


        $("#login").on("click", function (e) {
            var email = $("#email").val();
            var code = $("#code").val();
            $.ajax({
                type : "post",
                url : "http://localhost:9001/verify/email/verify",
                data : {
                    email : email,
                    code : code,
                },
                crossDomain: true,
                dataType: "json",
                success : function (e) {
                    if (e.code == 200) {
                        alert("验证通过");
                    } else {
                        alert(e.message);
                    }
                }
            })
        });
    </script>

</body>
</html>